<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ActiveMQ</title>
    <link rel="icon" type="image/png" href="/activemq-website/assets/img/favicon.png">

    <link rel="stylesheet" href="/activemq-website/css/main.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js" integrity="sha384-SlE991lGASHoBfWbelyBPLsUlwY1GwNDJo3jSJO04KZ33K2bwfV9YBauFfnzvynJ" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light fixed-top">
    <div class="container">
        <!-- <a class="navbar-brand mr-auto" href="#"><img style="height: 50px" src="assets/img/apache-feather.png" /></a> -->
        <a class="navbar-brand mr-auto" href="#"><img src="/activemq-website/assets/img/activemq_logo_black_small.png" style="height: 50px"/></a>
        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="ml-auto collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link active" href="/activemq-website/index.html">Home</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownProjects" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects</a>
                    <ul class="dropdown-menu dropdown-menu-center" aria-labelledby="navbarDropdownProjects">
                        <div class="row">
                            <div class="col-12">
                                <ul class="multi-column-dropdown">
                                    <h6 class="dropdown-header">Projects</h6>
                                    <div class="dropdown-divider"></div>
                                    <li class="nav-item"><a class="dropdown-item" href="/activemq-website/projects/classic">ActiveMQ 5</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/activemq-website/projects/artemis/">ActiveMQ Artemis</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/activemq-website/projects/nms">NMS Clients</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/activemq-website/projects/cms">CMS Client</a></li>
                                </ul>
                            </div>
                        </div>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownCommunity" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Contact</a>
                    <ul class="dropdown-menu dropdown-menu-center multi-column columns-1" aria-labelledby="navbarDropdownCommunity">
                        <div class="row">
                            <div class="col-12">
                                <ul class="multi-column-dropdown">
                                    <h6 class="dropdown-header">Contact</h6>
                                    <div class="dropdown-divider"></div>
                                    <li class="nav-item"><a class="dropdown-item" href="/activemq-website/contact#mailing">Mailing Lists</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/activemq-website/contact#chat">Chat</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/activemq-website/contact#issues">Report Issues</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/activemq-website/contact#contributing">Contributing</a></li>
                                </ul>
                            </div>
                          </div>
                    </ul>
                </li>
                <!--li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownTeam" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Team</a>
                    <ul class="dropdown-menu dropdown-menu-center multi-column columns-1" aria-labelledby="navbarDropdownTeam">
                        <div class="row">
                            <div class="col-sm-12">
                                <ul class="multi-column-dropdown">
                                    <h6 class="dropdown-header">Team</h6>
                                    <div class="dropdown-divider"></div>
                                    <li class="nav-item"><a class="dropdown-item" href="/activemq-website/team">PMC & Committers</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/activemq-website/team/reports">Board Reports</a></li>
                                </ul>
                            </div>
                        </div>
                    </ul>
                </li-->
                <li class="nav-item dropdown">
                    <a class="nav-link" id="navbarDropdownTeam" data-target="#" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Apache</a>
                    <ul class="dropdown-menu dropdown-menu-center multi-column columns-1" aria-labelledby="navbarDropdownTeam">
                        <div class="row">
                            <div class="col-sm-12">
                                <ul class="multi-column-dropdown">
                                    <h6 class="dropdown-header">Apache</h6>
                                    <div class="dropdown-divider"></div>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org">The Apache Software Foundation</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/licenses/">License</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/security/">Security</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://www.apache.org/events/current-event">Events</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="https://people.apache.org/phonebook.html?pmc=activemq">PMC & Committers</a></li>
                                    <li class="nav-item"><a class="dropdown-item" href="/activemq-website/team/reports">Board Reports</a></li>
                                </ul>
                            </div>
                        </div>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="content">
  <div class="page-title-activemq5">
    <div class="container">
      <h1>AUTO</h1>
    </div>
  </div>
  <div class="container" >
    <div class="row" style="margin-top: 30px">
      <div class="col-12 activemq5">
        <p><a href="connectivity">Connectivity</a> &gt; <a href="protocols">Protocols</a> &gt; <a href="auto">AUTO</a></p>

<p>Starting with version 5.13.0, ActiveMQ supports wire format protocol detection.   OpenWire, STOMP, AMQP, and MQTT can be automatically detected.  This allows one transport to be shared for all 4 types of clients.</p>

<h3 id="enabling-auto-over-tcp">Enabling AUTO over TCP</h3>

<p>To configure ActiveMQ auto wire format detection over a TCP connection use the <code class="highlighter-rouge">auto</code> transport prefix. For example, add the following transport configuration in your XML file:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;transportConnector name="auto" uri="auto://localhost:5671"/&gt;
</code></pre></div></div>
<h3 id="enabling-auto-over-ssl">Enabling AUTO over SSL</h3>

<p>To configure ActiveMQ auto wire format detection over an SSL connection use the <code class="highlighter-rouge">auto+ssl</code> transport prefix. For example, add the following transport configuration in your XML file:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;transportConnector name="auto+ssl" uri="auto+ssl://localhost:5671"/&gt;
</code></pre></div></div>
<ul>
  <li>For more details on using SSL with ActiveMQ, see the following article (<a href="how-do-i-use-ssl">How do I use SSL</a>).</li>
</ul>

<h3 id="enabling-auto-over-nio">Enabling AUTO over NIO</h3>

<p>To configure ActiveMQ auto wire format detection over an NIO TCP connection use the <code class="highlighter-rouge">auto+nio</code> transport prefix. For example, add the following transport configuration in your XML file:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;transportConnector name="auto+nio" uri="auto+nio://localhost:5671"/&gt;
</code></pre></div></div>
<h3 id="enabling-auto-over-nio-ssl">Enabling AUTO over NIO SSL</h3>

<p>To configure ActiveMQ auto wire format detection over an NIO SSL connection use the <code class="highlighter-rouge">auto+nio+ssl</code> transport prefix. For example, add the following transport configuration in your XML file:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;transportConnector name="auto+nio+ssl" uri="auto+nio+ssl://localhost:5671"/&gt;
</code></pre></div></div>

<h3 id="configuring-auto-transport-options">Configuring AUTO Transport Options</h3>

<p>There are some configuration options that can be set.</p>

<table>
  <thead>
    <tr>
      <th>Parameter Name</th>
      <th>Default Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>protocolDetectionTimeOut</td>
      <td>30000</td>
      <td>The time before a connection times out in milliseconds. This is similar to maxInactivityDuration. If a client makes a connection to but doesn’t send data or enough data for the protocol to be detected then the thread will sit and wait for more data to come in over the socket. This will let the broker kill the connections if they do not complete the protocol initialization after a certain period of time. The default is 30 seconds. Set a default to &lt;= 0 to disable this.</td>
    </tr>
    <tr>
      <td>maxConnectionThreadPoolSize</td>
      <td>MAX_INT</td>
      <td>This option allows the configuration of the maximum size of the thread pool that handles connection attempts. Lowering this number can help prevent the broker from running out of threads if there are many different clients attempting to connect at the same time. By default it is turned off by setting to MAX_INT</td>
    </tr>
  </tbody>
</table>

<p>An example that configures the transport with a maximum protocol detection time of 5 seconds:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;transportConnector name="auto" uri="auto://localhost:5671?protocolDetectionTimeOut=5000"/&gt;
</code></pre></div></div>

<h3 id="configuring-wire-formats">Configuring Wire Formats</h3>

<p>OpenWire is the default Wire Format that ActiveMQ uses.  It provides a highly efficent binary format for high speed messaging.  OpenWire options can be configured on a JMS client’s connection URI string or on a Brokers transport bind URI.</p>

<table>
  <thead>
    <tr>
      <th>Parameter Prefix</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>wireFormat.</td>
      <td>Applies the option to all wire formats.</td>
    </tr>
    <tr>
      <td>wireFormat.default.</td>
      <td>Applies the option to the default format which is OpenWire</td>
    </tr>
    <tr>
      <td>wireFormat.stomp.</td>
      <td>Applies the option to the STOMP wire format</td>
    </tr>
    <tr>
      <td>wireFormat.amqp.</td>
      <td>Applies the option to the AMQP wire format</td>
    </tr>
    <tr>
      <td>wireFormat.mqtt.</td>
      <td>Applies the option to the MQTT wire format</td>
    </tr>
  </tbody>
</table>

<p>An example of a property that applies to all formats:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;transportConnector name="auto" uri="auto://localhost:5671?wireFormat.maxFrameSize=1000"/&gt;
</code></pre></div></div>
<p>An example of a property only applied to OpenWire would be:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;transportConnector name="auto" uri="auto://localhost:5671?wireFormat.default.maxFrameSize=1000"/&gt;
</code></pre></div></div>

<h3 id="configuring-enabled-wire-protocols">Configuring Enabled Wire Protocols</h3>

<p>By default all wire protocols are available.  This can be configured to only enable certain formats by setting the property  auto<code class="highlighter-rouge">.protocols.</code> </p>

<table>
  <thead>
    <tr>
      <th>Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>default</td>
      <td>Enables OpenWire</td>
    </tr>
    <tr>
      <td>amqp</td>
      <td>Enables AMQP format</td>
    </tr>
    <tr>
      <td>stomp</td>
      <td>Enables STOMP format</td>
    </tr>
    <tr>
      <td>mqtt</td>
      <td>Enables MQTT format</td>
    </tr>
  </tbody>
</table>

<p>An example showing only OpenWire and STOMP enabled:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;transportConnector name="auto" uri="auto://localhost:5671?auto.protocols=default,stomp"/&gt;
</code></pre></div></div>

      </div>
    </div>
  </div>
</div>
<div class="row sitemap">
  <div class="col-sm-12">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <div class="row">
            <div class="col-sm-3">
              <div >
                <img class="float-left" style="max-height: 100px" src="/activemq-website/assets/img/activemq_logo_white_vertical_small.png"/>
              </div>
            </div>
            <div style="text-align: center; margin-bottom: 0px; margin-top: 30px; font-size: 65%" class="col-sm-6">
              <p>Apache ActiveMQ, ActiveMQ, ActiveMQ Artemis, Apache, the Apache feather logo, and the Apache ActiveMQ project logo are trademarks of The Apache Software Foundation. Copyright &copy; 2019, The Apache Software Foundation. Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>.</p>
            </div>
            <div class="col-sm-3">
              <div >
                <a href="https://www.apache.org"><img class="float-right" style="margin-top: 10px; max-height: 80px" src="/activemq-website/assets/img/apache-logo-small.png"/></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
